P6:A) Create a Currency Converter application using EJB
Solution:-
Index.html
<html>
 <head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initialscale=1.0">
 </head>
 <body>
 <form action="CCServlet">
 Enter Amount <input type="text" name="amt"><br>
 Select Conversion Type
 <input type="radio" name="type" value="R2D">Rupees to Dollar
 <input type="radio" name="type" value="D2R">Dollar to Rupees<br>
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
 <input type ="Reset"><input type="submit" value="CONVERT">
 </form>
 </body>
</html>
CCServlet.java
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax .ejb.EJB;
import mybeans.CCBean;
public class CCServlet extends HttpServlet {
 @EJB CCBean obj;
@Override
 protected void doGet(HttpServletRequest request, HttpServletResponse
response)
 throws ServletException, IOException {
 response.setContentType("text/html;charset=UTF-8");
 PrintWriter out = response.getWriter();
 double amt=Double.parseDouble(request.getParameter("amt"));
 if(request.getParameter("type").equals("R2D"));
 {

out.println("<h>"+amt+"Rupess="+obj.R2Dollor(amt)+"Dollars</h1>");
 }
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
 if(request.getParameter("type").equals("D2R"));
 {

out.println("<h>"+amt+"Dollars="+obj.D2Rupees(amt)+"Rupees</h1>");

 }

 }
CCBean.java
package mybeans;
import javax.ejb.Stateless;
import javax.ejb.LocalBean;
@Stateless
@LocalBean
public class CCBean {
 public CCBean(){}
 public double R2Dollor(double R) {
 return R/65.65;
 }
 public double D2Rupees(double D) {
 return D*65.65;
 }
 }
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
OUTPUT:-

P6:B) Develop a Simple Room Reservation System
Application Using EJB.
Create table rookbook(RoomId varchar(4) PRIMARY KEY, RoomType
varchar(20), charges
number(5,2), cust varchar(20), mob varchar(20) , status varchar(10))
insert into roombook values('1001','Delux',5000.00,'','','Not Booked')
insert into roombook values('1002','Super Delux',7000.00,'','','Not Booked')
insert into roombook values('1003','Suit',9500.00,'','','Not Booked')
insert into roombook values('2001','Delux',5000.00,'','','Not Booked')
insert into roombook values('2002','Super Delux',7000.00,'','','Not Booked')
insert into roombook values('2003','Suit',9500.00,'','','Not Booked')
 RoomBook.html
<form action="RBServlet" >
 Select a room Type
<input type="radio" name="txtType" value="Delux">Delux
<input type="radio" name="txtType" value="Super Delux">Super Delux
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
<input type="radio" name="txtType" value="Suit">Suit<br>
 Enter Your Name<input type="text" name="txtCust" ><br>
 Enter Mobile No.<input type="text" name="txtMob" ><br>
<input type="reset" ><input type="submit" value="Book Room">
</form>
RBServlet
package mypack;
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.ejb.EJB;
import mybeans.RRBean;
public class RBServlet extends HttpServlet {
@EJB RRBean obj;
public void doGet(HttpServletRequest request, HttpServletResponse
response)
throws ServletException, IOException{
PrintWriter out=response.getWriter();
String rt=request.getParameter("txtType");
String cn=request.getParameter("txtCust");
String cm=request.getParameter("txtMob");
String msg = obj.roomBook(rt, cn, cm);
 out.println(msg);
 }
}
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
RRBean.java
package mybeans;
import javax.ejb.Stateless;
import java.sql.*;
@Stateless
public class RRBean {public RRBean(){}
public String roomBook(String rt, String cn, String cm){
String msg="";
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con =
DriverManager.getConnection("jdbc:mysql://localhost:3306/rrdb","root","
root");
String query="select * from roombook where RoomType=? and status='Not
Booked'";
PreparedStatement pst = con.prepareStatement(query);
pst.setString(1,rt);
ResultSet rs= pst.executeQuery();
if(rs.next()){
 String rno=rs.getString(1);
PreparedStatement stm1 = con.prepareStatement("update roombook set
cust=? where RoomId=? ");
PreparedStatement stm2 = con.prepareStatement("update roombook set
mobile=? where RoomId=? ");
PreparedStatement stm3 = con.prepareStatement("update roombook set
status=? where RoomId=? ");
stm1.setString(1,cn); stm1.setString(2,rno);
stm2.setString(1,cm); stm2.setString(2,rno);
stm3.setString(1, "Booked"); stm3.setString(2,rno);
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
stm1.executeUpdate();
stm2.executeUpdate();
stm3.executeUpdate();
msg = "Room "+rno+ " Booked <br> Charges = "+rs.getString(3);
}
else
{
msg = "Room "+rt+ " currently Not available";
}
}catch(Exception e){msg=""+e;}
return msg;
 }
}
OUTPUT:-



Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
P6:C) Develop simple shopping cart application using EJB
[Stateful Session Bean].
Index.html
<html>
 <head>
 <title>TODO supply a title</title>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initialscale=1.0">
 </head>
 <body>
 <form method="post" action="NewServlet">
 <input type="number" name="items">
 <select name="action">
 <option value="add">Add</option>
 <option value="remove">Remove</option>
 <option value="check">Check</option>
 </select>
 <input type="submit">
 </form>
 </body>
</html>
NewServlet.java
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
import beans.NewSessionBean;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
/**
 *
 * @author Rutik
 */
public class NewServlet extends HttpServlet {
 NewSessionBean newSessionBean2 = lookupNewSessionBeanBean();
 NewSessionBean newSessionBean1 = lookupNewSessionBeanBean();
 NewSessionBean newSessionBean = lookupNewSessionBeanBean();

Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
 protected void processRequest(HttpServletRequest request,
HttpServletResponse response)
 throws ServletException, IOException {
 response.setContentType("text/html;charset=UTF-8");
 try (PrintWriter out = response.getWriter()) {
 /* TODO output your page here. You may use following sample code.
*/
 out.println("<!DOCTYPE html>");
 out.println("<html>");
 out.println("<head>");
 out.println("<title>Servlet NewServlet</title>");
 out.println("</head>");
 out.println("<body>");
 int amt= Integer.parseInt(request.getParameter("items"));
 String action= request.getParameter("action");
 if(action.equals("add"))
 {
 newSessionBean.add(amt);
 out.print("items added to the cart");
 }
 else if(action.equals("remove"))
 {
 newSessionBean.remove(amt);
 out.print("items remove to the cart");
 }
 else
 {
 int total= newSessionBean.check();
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
 out.print("total cost is :"+ total);
 }


 out.println("</body>");
 out.println("</html>");
 }
 }
 @Override
 protected void doGet(HttpServletRequest request, HttpServletResponse
response)
 throws ServletException, IOException {
 processRequest(request, response);
 }
 @Override
 protected void doPost(HttpServletRequest request, HttpServletResponse
response)
 throws ServletException, IOException {
 processRequest(request, response);
 }
 @Override
 public String getServletInfo() {
 return "Short description";
 }// </editor-fold>
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559
 private NewSessionBean lookupNewSessionBeanBean() {
 try {
 Context c = new InitialContext();
 return (NewSessionBean)
c.lookup("java:global/Practical6C/Practical6Cejb/NewSessionBean!beans.NewSessionBean");
 } catch (NamingException ne) {
 Logger.getLogger(getClass().getName()).log(Level.SEVERE,
"exception caught", ne);
 throw new RuntimeException(ne);
 }
 }
}
NewSessionBean
package beans;
import javax.ejb.Stateful;
import javax.ejb.LocalBean;
@Stateful
@LocalBean
 public class NewSessionBean {
 private int cost;
 public NewSessionBean() {
 cost=0;
 }
Downloaded by rajat dalal (rajat@gmail.com)
lOMoARcPSD|59836559

 public void add(int amt) {
 cost+=amt;
 }
 public void remove(int amt) {
 cost-=amt;
 }
 public Integer check() {
 return cost;
 }

}